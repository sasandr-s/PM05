# Руководство системного администратора (программиста) ИС

Данное руководство содержит техническую информацию по развертыванию, конфигурации и поддержке информационной системы управления ателье.

---

## 1. Архитектура системы
Система построена на стеке **MERN**:
- **Frontend:** React.js (Vite), Vanilla CSS.
- **Backend:** Node.js, Express.
- **Database:** MongoDB (NoSQL).
- **Authentication:** JSON Web Tokens (JWT).

---

## 2. Структура проекта
```text
/client            # Фронтенд-приложение (React)
  /src
    /components    # Переиспользуемые UI-компоненты
    /pages         # Страницы (Home, Dashboards, Login)
    /api           # Конфигурация Axios
/server            # Бэкенд-приложение (Node.js)
  /models          # Схемы Mongoose (User, Order, Review, GalleryItem)
  /routes          # Маршруты API
  /middleware      # Посредники (Auth, Admin, Upload)
  /uploads         # Директория для хранения пользовательских фото
```

---

## 3. Установка и запуск

### Системные требования
- Node.js (v16+)
- MongoDB (локальная или Atlas)

### Шаги развертывания
1. **Клонирование и установка зависимостей:**
   ```bash
   # Бэкенд
   cd server && npm install
   # Фронтенд
   cd client && npm install
   ```

2. **Настройка окружения:**
   Создайте файл `.env` в директории `server`:
   ```env
   PORT=5000
   MONGO_URI=mongodb://localhost:27017/atelier
   JWT_SECRET=your_super_secret_key
   ```

3. **Запуск:**
   ```bash
   # Запуск сервера
   npm run dev (в папке server)
   # Запуск клиента
   npm run dev (в папке client)
   ```

---

## 4. Безопасность и роли
- **JWT:** Токены выпускаются при входе (`/api/auth/login`) и должны передаваться в заголовке `Authorization: Bearer <token>`.
- **Роли:** В системе две роли: `admin` и `user`.
- **Middleware:** 
  - `auth`: проверяет наличие и валидность JWT.
  - `admin`: проверяет наличие прав администратора у пользователя.
- **Пароли:** Хэшируются с использованием `bcryptjs` (10 раундов соли).

---

## 5. База данных
- **User:** Хранит профили, роли, логины и вложенный объект `measurements` (мерки).
- **Order:** Хранит данные о заказах, включая ссылку (`ObjectId`) на клиента.
- **Review:** Хранит отзывы и пути к загруженным изображениям.
- **GalleryItem:** Хранит элементы портфолио.

---

## 6. Загрузка медиафайлов
Все файлы (фото изделий в отзывах и галерее) сохраняются в директорию `server/uploads/`. Бэкенд раздает их как статические файлы:
```javascript
app.use('/uploads', express.static(path.join(__dirname, 'uploads')));
```
При переносе системы на другой сервер убедитесь, что у процесса Node.js есть права на запись в эту папку.

---

## 7. Поддержка и масштабирование
- **Логи:** В текущей версии логи выводятся в консоль процесса Node.js. Рекомендуется использовать `pm2` или `winston` для ведения журналов на диске.
- **Бэкап:** Для создания резервных копий используйте `mongodump`.

---
*(c) 2026 Разработка и техническое сопровождение системы.*
