# Технический паспорт API — Ателье

## Общая информация
- **Базовый URL:** `/api`
- **Формат данных:** `application/json`
- **Аутентификация:** `Bearer Token (JWT)` в заголовке `Authorization`.

## Уровни доступа
| Уровень | Описание |
| :--- | :--- |
| **Public** | Доступно всем без авторизации |
| **Auth** | Требуется валидный JWT-токен |
| **Admin** | Требуется токен пользователя с ролью `admin` |

---

## 1. Авторизация (Auth)

### Авторизация
- **URL:** `POST /auth/login`
- **Доступ:** Public
- **Тело запроса:**
  ```json
  {
    "username": "login",
    "password": "password"
  }
  ```
- **Ответ (200 OK):**
  ```json
  {
    "token": "JWT_TOKEN_HERE",
    "user": {
      "id": "...",
      "username": "...",
      "role": "...",
      "fullName": "..."
    }
  }
  ```

### Регистрация клиента
- **URL:** `POST /auth/register`
- **Доступ:** Admin
- **Описание:** Мастер (админ) создает учетную запись для клиента.
- **Тело запроса:** включает ФИО, телефон, email и мерки.

---

## 2. Пользователи и Мерки (Users)

### Мой профиль
- **URL:** `GET /users/me`
- **Доступ:** Auth
- **Описание:** Получение данных текущего пользователя и его мерок.

### Обновление мерок
- **URL:** `PUT /users/:id/measurements`
- **Доступ:** Auth (Свой профиль) / Admin
- **Тело запроса:**
  ```json
  {
    "fullName": "...",
    "phone": "...",
    "measurements": {
      "height": 170,
      "chest": 90,
      "waist": 60,
      "hips": 90,
      "additionalParams": "Особенности..."
    }
  }
  ```

### База клиентов
- **URL:** `GET /users/`
- **Доступ:** Admin
- **Описание:** Список всех пользователей с ролью `user`.

---

## 3. Заказы (Orders)

### Список заказов
- **URL:** `GET /orders`
- **Доступ:** Auth
- **Описание:** Клиент видит свои заказы, админ — все.

### Создание заказа
- **URL:** `POST /orders`
- **Доступ:** Admin
- **Описание:** Добавление нового заказа в систему.

### Управление заказом
- **URL:** `PUT /orders/:id`
- **Доступ:** Admin
- **Описание:** Смена статуса («В работе», «Готов» и т.д.) или редактирование деталей.

---

## 4. Отзывы (Reviews)

### Просмотр отзывов
- **URL:** `GET /reviews`
- **Доступ:** Public
- **Параметры:** `?page=1&limit=6`
- **Описание:** Получение отзывов с пагинацией для главной страницы.

### Оставить отзыв
- **URL:** `POST /reviews`
- **Доступ:** Auth
- **Формат:** `multipart/form-data` (поддержка загрузки фото).

---

## 5. Галерея работ (Gallery)

### Список работ
- **URL:** `GET /gallery`
- **Доступ:** Public

### Добавление работы
- **URL:** `POST /gallery`
- **Доступ:** Admin
- **Формат:** `multipart/form-data` (название, описание, файл изображения).

---
*(c) 2026 Информационная система Ателье.*
